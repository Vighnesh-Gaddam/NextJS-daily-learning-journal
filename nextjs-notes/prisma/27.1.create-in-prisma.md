# Creating a Movie Using Prisma (TypeScript)

## 1. Introduction

In this guide, we will create a function to add movies to a database using **Prisma ORM**. We'll cover creating a single movie, executing the function, and verifying data in Prisma Studio.

---

## 2. Setting Up the Function

### 2.1 Create a Function

* Define a function to create a movie. You can name it anything; here, it’s `createMovie`.
* Mark the function as `async` because database operations are asynchronous.

```ts
async function createMovie() {
  // Prisma queries will go here
}
```

### 2.2 Using Prisma Client

* Access Prisma using the Prisma client instance.
* Reference the model (`movie`) defined in the Prisma schema.
* Use the `create` method to add a new movie.

```ts
const newMovie = await prisma.movie.create({
  data: {
    title: "Inception",
    description: "A mind-bending thriller about dream invasion.",
    genre: "SciFi",
    releaseDate: new Date("2010-07-16"),
    rating: 8.8,
  },
});
console.log(newMovie);
```

---

## 3. Understanding the Fields

| Field         | Value Example              | Notes                                      |
| ------------- | -------------------------- | ------------------------------------------ |
| `title`       | Inception                  | Required. Name of the movie.               |
| `description` | A mind-bending thriller... | Required. Movie description.               |
| `genre`       | SciFi                      | Required. Genre of the movie.              |
| `releaseDate` | 2010-07-16                 | Required. Must be a `Date` object.         |
| `rating`      | 8.8                        | Required. Movie rating.                    |
| `id`          | Auto-generated             | Automatically incremented by Prisma.       |
| `createdAt`   | Auto-generated             | Automatically set to current timestamp.    |
| `updatedAt`   | Auto-generated             | Automatically updated when record changes. |

> ✅ Note: Prisma auto-generates `id`, `createdAt`, and `updatedAt` if default values are defined in the schema.

---

## 4. Executing the Function

* Call the function inside a `main` function or directly in your `index.ts`.
* Use `await` since it’s asynchronous.

```ts
async function main() {
  await createMovie();
}

main();
```

---

## 5. Running the Script

1. **Using TS Node**

   * Run the file using `ts-node`:

   ```bash
   npx ts-node src/index.ts
   ```

2. **Custom Shortcut via `package.json`**

   * Add a custom script for development:

   ```json
   "scripts": {
     "dev": "ts-node src/index.ts"
   }
   ```

   * Run using:

   ```bash
   npm run dev
   ```

---

## 6. Verifying Data in Prisma Studio

* Start Prisma Studio:

```bash
npx prisma studio
```

* Refresh the page to see the new movie entry in the database.

---

## 7. Adding Multiple Movies

* The current function adds only a single movie.
* To add multiple movies, create additional functions or loop over an array of movie data.
* Example structure for multiple movies:

```ts
const movies = [
  { title: "Movie1", description: "...", genre: "...", releaseDate: new Date("..."), rating: 7.5 },
  { title: "Movie2", description: "...", genre: "...", releaseDate: new Date("..."), rating: 8.2 },
];

for (const movie of movies) {
  await prisma.movie.create({ data: movie });
}
```

---

## 8. Summary

* **Step 1:** Create an async function to add a movie.
* **Step 2:** Use Prisma client and `create` method.
* **Step 3:** Provide required movie data (`title`, `description`, `genre`, `releaseDate`, `rating`).
* **Step 4:** Call the function in `main()` with `await`.
* **Step 5:** Run the script via TS Node or a custom npm script.
* **Step 6:** Verify the data in Prisma Studio.
* **Step 7:** Extend functionality to add multiple movies using arrays or loops.

---
