# Fetching All Movies Using Prisma (TypeScript)

## 1. Introduction

* After adding movies to the database, the next step is to **retrieve all movies**.
* Prisma provides the `findMany` function to fetch multiple records from a table.

---

## 2. Creating the Function

### 2.1 Define Async Function

* Create an asynchronous function `getAllMovies`.
* This function will query the database for all movies.

```ts
async function getAllMovies() {
  const movies = await prisma.movie.findMany();
  console.log("All Movies:", movies);
}
```

### 2.2 Key Points

* `findMany()` retrieves **all records** from the `movie` table.
* The result is stored in a variable (`movies`) which can be logged to the console.
* Useful when Prisma Studio is unavailable and you want to see results in the terminal.

---

## 3. Executing the Function

* Call the function inside the `main()` function.
* Use `await` because the function is asynchronous.

```ts
async function main() {
  await getAllMovies();
}

main();
```

---

## 4. Running the Script

* Use TS Node or npm script to execute the code.

```bash
# Using TS Node directly
npx ts-node src/index.ts

# Or via npm script
npm run dev
```

* The terminal will display all movies in the database.

---

## 5. Verifying Output

* The console log will show all movies as an array of objects.
* Example output:

```json
[
  { id: 1, title: "Inception", genre: "SciFi", rating: 8.8, ... },
  { id: 2, title: "The Dark Knight", genre: "Superhero", rating: 9.0, ... },
  { id: 3, title: "Interstellar", genre: "SciFi", rating: 8.6, ... },
  { id: 4, title: "Alien Covenant", genre: "SciFi", rating: 6.4, ... }
]
```

---

## 6. Summary Steps

1. Define an **async function** `getAllMovies()`.
2. Use `prisma.movie.findMany()` to fetch all records.
3. Store results in a variable and log to console.
4. Call the function in `main()` using `await`.
5. Run the script to see all movies in the terminal.

---