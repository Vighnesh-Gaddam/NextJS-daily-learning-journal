# 🏆 Challenge: Filter Books by Query

## 🎯 Goal

Build a **GET API** that allows users to **search for books** by title using query parameters.

---

## 📝 Instructions

1. Inside `app/books/route.ts`, create a `GET` function.
2. Get query parameter using:

   ```ts
   const query = request.nextUrl.searchParams.get("query");
   ```
3. If query exists → filter books by `title` (case-insensitive).
4. If no query → return the full list of books.
5. Respond with JSON and status `200`.

---

## 📂 Example db.ts

```ts
export const books = [
  { id: 1, title: "Atomic Habits", author: "James Clear" },
  { id: 2, title: "The Pragmatic Programmer", author: "Andrew Hunt" },
  { id: 3, title: "Clean Code", author: "Robert C. Martin" },
  { id: 4, title: "Deep Work", author: "Cal Newport" },
];
```

---

## ✅ Expected Behavior

* **GET `/books`** → Returns all books
* **GET `/books?query=Clean`**

```json
[
  {
    "id": 3,
    "title": "Clean Code",
    "author": "Robert C. Martin"
  }
]
```

* **GET `/books?query=Atomic`**

```json
[
  {
    "id": 1,
    "title": "Atomic Habits",
    "author": "James Clear"
  }
]
```

You’re right—here’s the **solution** 😊

---

## 🧠 Solution

### `app/db.ts`

(Use your provided data.)

```ts
export const books = [
  { id: 1, title: "Atomic Habits", author: "James Clear" },
  { id: 2, title: "The Pragmatic Programmer", author: "Andrew Hunt" },
  { id: 3, title: "Clean Code", author: "Robert C. Martin" },
  { id: 4, title: "Deep Work", author: "Cal Newport" },
];
```

### `app/books/route.ts`

```ts
import { NextRequest, NextResponse } from "next/server";
import { books } from "../db"; // adjust path if your db.ts is elsewhere

export async function GET(request: NextRequest) {
  const query = request.nextUrl.searchParams.get("query")?.toLowerCase() ?? "";

  const results = query
    ? books.filter((b) => b.title.toLowerCase().includes(query))
    : books;

  return NextResponse.json(results, { status: 200 });
}
```

---

## 🔎 Quick Tests

* **GET** `/books` → all books
* **GET** `/books?query=Clean` → `[{ id: 3, title: "Clean Code", ... }]`
* **GET** `/books?query=Atomic` → `[{ id: 1, title: "Atomic Habits", ... }]`

