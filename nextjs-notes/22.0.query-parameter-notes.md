# ðŸŽ¬ Notes: URL Query Parameters in Next.js (Filtering Movies)

## ðŸ“Œ What are Query Parameters?

* Query parameters are **key-value pairs** added to the end of a URL using `?`.
* Used to **filter, search, or customize** API responses.
* Example:

  ```
  /movies?query=John
  ```

---

## ðŸ›  Implementation in Next.js (route.ts)

### 1. Setup GET Handler

```ts
import { NextRequest } from "next/server";
import { movies } from "../../../db";

export async function GET(request: NextRequest) {
  // Extract search params
  const searchParams = request.nextUrl.searchParams;

  // Get the "query" parameter from URL
  const query = searchParams.get("query");

  let filteredMovies;

  if (query) {
    // Filter movies by name (case-insensitive)
    filteredMovies = movies.filter((movie) =>
      movie.name.toLowerCase().includes(query.toLowerCase())
    );
  } else {
    // If no query -> return all movies
    filteredMovies = movies;
  }

  return new Response(JSON.stringify(filteredMovies), {
    status: 200,
    headers: { "Content-Type": "application/json" },
  });
}
```

---

## ðŸ§ª Testing

1. **GET `/movies`**
   ðŸ‘‰ Returns **all movies**

2. **GET `/movies?query=John`**
   ðŸ‘‰ Returns only **John Wick**

3. **GET `/movies?query=Matrix`**
   ðŸ‘‰ Returns only **The Matrix**

---

## âœ… Key Points

* Use `request.nextUrl.searchParams.get("query")` to extract query values.
* If query exists â†’ filter movies.
* If no query â†’ return full list.
* Always return JSON with a proper status code (200).

---