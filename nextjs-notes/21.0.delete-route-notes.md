# ðŸŽ¬ Notes: DELETE Method in Next.js (Backend)

## ðŸ“Œ What is DELETE?

* **DELETE** is an HTTP method used to **remove a resource** from the server.
* Example: Removing a movie from the movies list.

ðŸ‘‰ Once deleted, the resource **cannot be retrieved** unless added again.

---

## ðŸ›  Steps to Implement DELETE in Next.js

### 1. Inside Dynamic Route

File: `app/movies/[id]/route.ts`

```ts
import { movies } from "../../../db";

export async function DELETE(
  _request: Request,
  { params }: { params: { id: string } }
) {
  const movieId = +params.id;

  // Find index of movie
  const index = movies.findIndex((m) => m.id === movieId);

  // If movie not found
  if (index === -1) {
    return new Response(JSON.stringify({ error: "Movie not found" }), {
      status: 404,
      headers: { "Content-Type": "application/json" },
    });
  }

  // Remove movie from list
  movies.splice(index, 1);

  // Send success response
  return new Response(
    JSON.stringify({ message: "Movie deleted successfully" }),
    {
      status: 200,
      headers: { "Content-Type": "application/json" },
    }
  );
}
```

---

## ðŸ§ª Testing with Thunder Client / Postman

* **GET `/movies/4`**

```json
{
  "id": 4,
  "title": "The Dark Knight",
  "rating": 5,
  "genre": "Action"
}
```

* **DELETE `/movies/4`**

```json
{
  "message": "Movie deleted successfully"
}
```

* **GET `/movies/4`** after deletion

```json
{
  "error": "Movie not found"
}
```

---

## âœ… Key Points

* Always **check if resource exists** using `.findIndex`.
* If index is `-1`, return **404 Not Found**.
* Use `.splice(index, 1)` to remove the movie.
* Return a **success message with status 200** after deletion.

---