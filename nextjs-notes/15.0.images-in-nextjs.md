# 🖼️ Handling Images in Next.js

## 📌 Why Use `next/image` Instead of `<img>`?

Next.js provides the special `<Image />` component (from `next/image`) which is **highly optimized** compared to the native `<img>` tag:

* ✅ **Automatic Optimization** – Images are compressed & resized for faster loading.  
* ✅ **Responsive by Default** – Serves the right size for the user’s device.  
* ✅ **Lazy Loading** – Loads images only when they appear in the viewport.  
* ✅ **CDN Caching** – Images are cached and served quickly via Next.js Image Optimization API.  
* ✅ **Improved Performance Score** – Helps boost **Lighthouse** and **Core Web Vitals**.  

---

## 📂 Folder Structure (with internal image)

```
app/
├─ page.tsx        // Home page
public/
└─ nature.jpg      // Internal image stored locally
````

---

## 🌆 Internal Images

**Internal images** are stored inside the `public/` directory of your Next.js project.  
They are **automatically trusted** and don’t need any extra configuration.

### Example:

```tsx
import Image from "next/image";
import natureImage from "../public/nature.jpg"; // Import local image

export default function Home() {
  return (
    <div>
      <h1>🌿 Nature Image (Internal)</h1>
      <Image
        src={natureImage}
        alt="Beautiful nature"
        width={600}
        height={400}
      />
    </div>
  );
}
````

### 🔑 Key Notes:

* Stored in `/public` → accessible directly at `/nature.jpg`.
* No need to configure `next.config.js`.
* Next.js automatically **optimizes the image** (e.g., a 3MB image → compressed to \~500KB).
* Always specify `alt`, `width`, and `height`.

---

## 🌍 External Images

**External images** are loaded from **remote URLs** (CDNs, APIs, external sites).
Since they are not in your app, you must **whitelist their domains** in `next.config.js`.

### Example:

```tsx
import Image from "next/image";

export default function ExternalImage() {
  return (
    <div>
      <h1>🌍 External Image</h1>
      <Image
        src="https://images.unsplash.com/photo-123456789"
        alt="Nature from Unsplash"
        width={600}
        height={400}
      />
    </div>
  );
}
```

### Configuration (`next.config.js`):

```js
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    domains: ["images.unsplash.com"], // Whitelisted host
  },
};

module.exports = nextConfig;
```

### 🔑 Key Notes:

* **Required properties**: `alt`, `width`, and `height`.
* Must whitelist the image domain in `next.config.js`.
* Without whitelisting → ❌ Error: `Invalid src prop`.
* After configuration, Next.js optimizes external images as well.

---

## ⚡ Benefits of `next/image`

| Feature                | `<img>` | `<Image>` (Next.js)       |
| ---------------------- | ------- | ------------------------- |
| Automatic Optimization | ❌       | ✅                         |
| Responsive             | ❌       | ✅                         |
| Lazy Loading           | ❌       | ✅                         |
| Requires width/height  | ❌       | ✅ (prevents layout shift) |
| Remote domain support  | ❌       | ✅                         |
| CDN caching            | ❌       | ✅                         |

---

## 📌 Common Errors & Fixes

1. **Error: "Image is missing required width/height"**
   → Always pass `width` and `height` props for external images.

2. **Error: "Invalid src prop"**
   → Add the host domain to `next.config.js` under `images.domains`.

3. **Large images slowing site**
   → Next.js auto-optimizes, but use proper sizes (`width`/`height`) for better performance.

---

## 📌 Best Practices

* ✅ Always add `alt` text → improves **SEO** & **accessibility**.
* ✅ Use **`layout="responsive"`** for fluid designs.
* ✅ Keep images in `/public` if they don’t change often.
* ✅ For user-uploaded or dynamic images → configure external domains.
* ✅ Inspect image size in **DevTools → Network** to see optimization in action.

---

## 🚀 Summary

* **Internal images**: Stored in `/public`, no config needed, automatically optimized.
* **External images**: Require `width`, `height`, and **whitelisted domains** in `next.config.js`.
* `next/image` → Faster loads, better performance, SEO-friendly, responsive, and lazy-loaded by default.

---
