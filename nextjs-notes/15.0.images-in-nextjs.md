# ğŸ–¼ï¸ Handling Images in Next.js

## ğŸ“Œ Why Use `next/image` Instead of `<img>`?

Next.js provides the special `<Image />` component (from `next/image`) which is **highly optimized** compared to the native `<img>` tag:

* âœ… **Automatic Optimization** â€“ Images are compressed & resized for faster loading.  
* âœ… **Responsive by Default** â€“ Serves the right size for the userâ€™s device.  
* âœ… **Lazy Loading** â€“ Loads images only when they appear in the viewport.  
* âœ… **CDN Caching** â€“ Images are cached and served quickly via Next.js Image Optimization API.  
* âœ… **Improved Performance Score** â€“ Helps boost **Lighthouse** and **Core Web Vitals**.  

---

## ğŸ“‚ Folder Structure (with internal image)

```
app/
â”œâ”€ page.tsx        // Home page
public/
â””â”€ nature.jpg      // Internal image stored locally
````

---

## ğŸŒ† Internal Images

**Internal images** are stored inside the `public/` directory of your Next.js project.  
They are **automatically trusted** and donâ€™t need any extra configuration.

### Example:

```tsx
import Image from "next/image";
import natureImage from "../public/nature.jpg"; // Import local image

export default function Home() {
  return (
    <div>
      <h1>ğŸŒ¿ Nature Image (Internal)</h1>
      <Image
        src={natureImage}
        alt="Beautiful nature"
        width={600}
        height={400}
      />
    </div>
  );
}
````

### ğŸ”‘ Key Notes:

* Stored in `/public` â†’ accessible directly at `/nature.jpg`.
* No need to configure `next.config.js`.
* Next.js automatically **optimizes the image** (e.g., a 3MB image â†’ compressed to \~500KB).
* Always specify `alt`, `width`, and `height`.

---

## ğŸŒ External Images

**External images** are loaded from **remote URLs** (CDNs, APIs, external sites).
Since they are not in your app, you must **whitelist their domains** in `next.config.js`.

### Example:

```tsx
import Image from "next/image";

export default function ExternalImage() {
  return (
    <div>
      <h1>ğŸŒ External Image</h1>
      <Image
        src="https://images.unsplash.com/photo-123456789"
        alt="Nature from Unsplash"
        width={600}
        height={400}
      />
    </div>
  );
}
```

### Configuration (`next.config.js`):

```js
/** @type {import('next').NextConfig} */
const nextConfig = {
  images: {
    domains: ["images.unsplash.com"], // Whitelisted host
  },
};

module.exports = nextConfig;
```

### ğŸ”‘ Key Notes:

* **Required properties**: `alt`, `width`, and `height`.
* Must whitelist the image domain in `next.config.js`.
* Without whitelisting â†’ âŒ Error: `Invalid src prop`.
* After configuration, Next.js optimizes external images as well.

---

## âš¡ Benefits of `next/image`

| Feature                | `<img>` | `<Image>` (Next.js)       |
| ---------------------- | ------- | ------------------------- |
| Automatic Optimization | âŒ       | âœ…                         |
| Responsive             | âŒ       | âœ…                         |
| Lazy Loading           | âŒ       | âœ…                         |
| Requires width/height  | âŒ       | âœ… (prevents layout shift) |
| Remote domain support  | âŒ       | âœ…                         |
| CDN caching            | âŒ       | âœ…                         |

---

## ğŸ“Œ Common Errors & Fixes

1. **Error: "Image is missing required width/height"**
   â†’ Always pass `width` and `height` props for external images.

2. **Error: "Invalid src prop"**
   â†’ Add the host domain to `next.config.js` under `images.domains`.

3. **Large images slowing site**
   â†’ Next.js auto-optimizes, but use proper sizes (`width`/`height`) for better performance.

---

## ğŸ“Œ Best Practices

* âœ… Always add `alt` text â†’ improves **SEO** & **accessibility**.
* âœ… Use **`layout="responsive"`** for fluid designs.
* âœ… Keep images in `/public` if they donâ€™t change often.
* âœ… For user-uploaded or dynamic images â†’ configure external domains.
* âœ… Inspect image size in **DevTools â†’ Network** to see optimization in action.

---

## ğŸš€ Summary

* **Internal images**: Stored in `/public`, no config needed, automatically optimized.
* **External images**: Require `width`, `height`, and **whitelisted domains** in `next.config.js`.
* `next/image` â†’ Faster loads, better performance, SEO-friendly, responsive, and lazy-loaded by default.

---
