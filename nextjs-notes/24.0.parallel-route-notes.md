# ğŸ¬ Notes: Parallel Routes in Next.js

## ğŸ“Œ What are Parallel Routes?

* **Parallel Routes** let you render multiple pages **side by side** in the same layout.
* Each route can manage its own:

  * **`loading.tsx`** (loading state)
  * **`error.tsx`** (error boundary)
  * **`default.tsx`** (fallback content)

---

## ğŸš« Life Without Parallel Routes

### Problem 1: Errors

* If a child component (e.g. `Comments`) throws an error,
  â†’ it **blocks the entire UI**.
* Example:

  ```tsx
  if (2 < 5) throw new Error("Something went wrong");
  ```

  ğŸ‘‰ Entire screen breaks instead of isolating the error.

### Problem 2: Loading States

* Without `parallel routes`, if a component simulates async work (e.g. 4s delay),
  â†’ `loading.tsx` does **not work**.
* Whole UI is blocked until resolution.

### Problem 3: Error & Loading Files Ignored

* `error.tsx` and `loading.tsx` **wonâ€™t work** because we are just rendering plain components, not Next.js pages.

---

## âœ… Refactoring to Parallel Routes

### 1. Convert Components â†’ Pages

* Delete `components/` folder.
* Instead, define **pages** under `app/`:

```
app/
 â”£ @comments/page.tsx
 â”£ @members/page.tsx
 â”£ layout.tsx
 â”— page.tsx
```

### 2. Mark Routes as Parallel

* Prefix folder names with `@`:

  * `@comments`
  * `@members`

### 3. Update Layout

```tsx
export default function Layout({
  children,
  comments,
  members,
}: {
  children: React.ReactNode;
  comments: React.ReactNode;
  members: React.ReactNode;
}) {
  return (
    <div className="flex">
      {comments}
      {members}
      {children}
    </div>
  );
}
```

ğŸ‘‰ Now, both `Comments` and `Members` render **side by side**.

---

## ğŸ§ª Features with Parallel Routes

### ğŸ”¹ Error Boundaries

* Create `error.tsx` inside `@members`:

  ```tsx
  "use client";

  export default function Error() {
    return <div>âš ï¸ Oops! Something went wrong.</div>;
  }
  ```
* Error in **Members** â†’ only Members area breaks.
  Rest of UI stays intact âœ….

---

### ğŸ”¹ Loading States

* Create `loading.tsx` inside `@comments`:

  ```tsx
  export default function Loading() {
    return <div>Loading...</div>;
  }
  ```
* Simulated 4s delay â†’ only `Comments` shows loader.
  UI around stays functional âœ….

---

### ğŸ”¹ Default States

* Use `default.tsx` to provide **fallback content**.
* Example:

  ```tsx
  export default function Default() {
    return <div>No content yet</div>;
  }
  ```
* Without defaults â†’ navigating causes `404` on hard reload.
* Defaults ensure **graceful fallback** when slot is empty.

---

## âœ… Key Takeaways

* Without parallel routes â†’
  âŒ Errors & loaders block the whole app.
  âŒ `error.tsx` and `loading.tsx` donâ€™t work.

* With parallel routes â†’
  âœ… Errors are isolated per section.
  âœ… Loaders work independently.
  âœ… Defaults prevent 404s.
  âœ… Cleaner, more modular UI.

---
