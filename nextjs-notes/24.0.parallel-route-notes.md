# 🎬 Notes: Parallel Routes in Next.js

## 📌 What are Parallel Routes?

* **Parallel Routes** let you render multiple pages **side by side** in the same layout.
* Each route can manage its own:

  * **`loading.tsx`** (loading state)
  * **`error.tsx`** (error boundary)
  * **`default.tsx`** (fallback content)

---

## 🚫 Life Without Parallel Routes

### Problem 1: Errors

* If a child component (e.g. `Comments`) throws an error,
  → it **blocks the entire UI**.
* Example:

  ```tsx
  if (2 < 5) throw new Error("Something went wrong");
  ```

  👉 Entire screen breaks instead of isolating the error.

### Problem 2: Loading States

* Without `parallel routes`, if a component simulates async work (e.g. 4s delay),
  → `loading.tsx` does **not work**.
* Whole UI is blocked until resolution.

### Problem 3: Error & Loading Files Ignored

* `error.tsx` and `loading.tsx` **won’t work** because we are just rendering plain components, not Next.js pages.

---

## ✅ Refactoring to Parallel Routes

### 1. Convert Components → Pages

* Delete `components/` folder.
* Instead, define **pages** under `app/`:

```
app/
 ┣ @comments/page.tsx
 ┣ @members/page.tsx
 ┣ layout.tsx
 ┗ page.tsx
```

### 2. Mark Routes as Parallel

* Prefix folder names with `@`:

  * `@comments`
  * `@members`

### 3. Update Layout

```tsx
export default function Layout({
  children,
  comments,
  members,
}: {
  children: React.ReactNode;
  comments: React.ReactNode;
  members: React.ReactNode;
}) {
  return (
    <div className="flex">
      {comments}
      {members}
      {children}
    </div>
  );
}
```

👉 Now, both `Comments` and `Members` render **side by side**.

---

## 🧪 Features with Parallel Routes

### 🔹 Error Boundaries

* Create `error.tsx` inside `@members`:

  ```tsx
  "use client";

  export default function Error() {
    return <div>⚠️ Oops! Something went wrong.</div>;
  }
  ```
* Error in **Members** → only Members area breaks.
  Rest of UI stays intact ✅.

---

### 🔹 Loading States

* Create `loading.tsx` inside `@comments`:

  ```tsx
  export default function Loading() {
    return <div>Loading...</div>;
  }
  ```
* Simulated 4s delay → only `Comments` shows loader.
  UI around stays functional ✅.

---

### 🔹 Default States

* Use `default.tsx` to provide **fallback content**.
* Example:

  ```tsx
  export default function Default() {
    return <div>No content yet</div>;
  }
  ```
* Without defaults → navigating causes `404` on hard reload.
* Defaults ensure **graceful fallback** when slot is empty.

---

## ✅ Key Takeaways

* Without parallel routes →
  ❌ Errors & loaders block the whole app.
  ❌ `error.tsx` and `loading.tsx` don’t work.

* With parallel routes →
  ✅ Errors are isolated per section.
  ✅ Loaders work independently.
  ✅ Defaults prevent 404s.
  ✅ Cleaner, more modular UI.

---
